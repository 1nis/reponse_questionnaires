{"extVersion":"1.29.9","name":"répondre","icon":"riGlobalLine","table":[],"version":"1.29.9","drawflow":{"nodes":[{"id":"qBt3gCoPSUlBo6LIUNqaH","type":"BlockBasic","initialized":false,"position":{"x":100,"y":397},"data":{"disableBlock":false,"description":"","type":"manual","interval":60,"delay":5,"date":"","time":"00:00","url":"","shortcut":"","activeInInput":false,"isUrlRegex":false,"days":[],"contextMenuName":"","contextTypes":[],"parameters":[],"preferParamsInTab":false,"observeElement":{"selector":"","baseSelector":"","matchPattern":"","targetOptions":{"subtree":false,"childList":true,"attributes":false,"attributeFilter":[],"characterData":false},"baseElOptions":{"subtree":false,"childList":true,"attributes":false,"attributeFilter":[],"characterData":false}}},"label":"trigger"},{"id":"i5h1l46","type":"BlockBasic","initialized":false,"position":{"x":679.5342593734548,"y":439.95446587417644},"data":{"disableBlock":false,"description":"","timeout":2000,"context":"website","code":"// ————————————————\n// 1) Q23 : cocher toujours “Aucun” (checkbox)\n// ————————————————\n(() => {\n  const container23 = [...document.querySelectorAll('[data-groupname]')].find(c => {\n    const span = c.querySelector('.itemnr');\n    return span && span.textContent.trim().startsWith('23');\n  });\n  if (container23) {\n    for (const cb of container23.querySelectorAll('input[type=\"checkbox\"]')) {\n      const label = cb.closest('label');\n      if (label && label.textContent.replace(/\\s+/g,' ').trim() === 'Aucun') {\n        if (!cb.checked) cb.click();\n        break;\n      }\n    }\n  }\n})();\n\n// ————————————————\n// 2) Q25 : cocher toujours “J’en ai parlé à l’enseignant(e)” (checkbox)\n// ————————————————\n(() => {\n  const container25 = [...document.querySelectorAll('[data-groupname]')].find(c => {\n    const span = c.querySelector('.itemnr');\n    return span && span.textContent.trim().startsWith('25');\n  });\n  if (container25) {\n    for (const cb of container25.querySelectorAll('input[type=\"checkbox\"]')) {\n      const label = cb.closest('label');\n      if (label && label.textContent.replace(/\\s+/g,' ').trim() === \"J'en ai parlé à l'enseignant(e)\") {\n        if (!cb.checked) cb.click();\n        break;\n      }\n    }\n  }\n})();\n\n// ————————————————\n// 3) Q27 : remplir aléatoirement 1–5 (recherche dynamique)\n// ————————————————\n(() => {\n  const label27 = [...document.querySelectorAll('label')].find(label => {\n    const span = label.querySelector('.itemnr');\n    return span && span.textContent.trim() === '27.';\n  });\n  if (!label27) return;\n  const inputId = label27.getAttribute('for');\n  const input27 = document.getElementById(inputId);\n  if (!input27) return;\n  const rand = Math.floor(Math.random() * 5) + 1;\n  input27.focus();\n  input27.value = rand;\n  input27.setAttribute('value', rand);\n  ['input', 'change'].forEach(evt =>\n    input27.dispatchEvent(new Event(evt, { bubbles: true }))\n  );\n})();\n\n// ————————————————\n// 4) Choix restreints par question (radios)\n// ————————————————\nconst allowed = {\n  6:  [\"Équilibré\", \"Dense (séances trop proches)\"],\n  7:  [\"Équilibré\", \"Excessif\"],\n  8:  [\"Équilibrée\", \"Importante\"],\n  13: [\"Plutôt oui\", \"Plutôt non\"],\n  14: [\"Tout à fait\", \"Plutôt oui\"],\n  15: [\"Tout à fait\", \"Plutôt oui\", \"Plutôt non\"],\n  16: [\"Tout à fait\", \"Plutôt oui\"],\n  17: [\"Tout à fait\", \"Plutôt oui\"],\n  18: [\"Tout à fait\", \"Plutôt oui\"],\n  19: [\"Plutôt oui\"],\n  20: [\"Plutôt oui\", \"Plutôt non\", \"Pas du tout\"],\n  22: [\n    \"Plusieurs fois par semaine tout au long du semestre\",\n    \"A peu près chaque semaine tout au long du semestre\",\n    \"Seulement quelques fois à la veille des examens\",\n    \"Seulement quelques fois en début de semestre\",\n    \"Seulement quelques fois au cours du semestre\",\n    \"Une seule fois\"\n  ],\n  26: [\"Tout à fait\", \"Plutôt oui\", \"Plutôt non\"],\n  28: [\"Tout à fait\", \"Plutôt oui\"],\n  29: [\"Tout à fait\", \"Plutôt oui\"]\n};\nconst normalize = s => s.replace(/\\s+/g,' ').trim();\nconst allowedNorm = Object.fromEntries(\n  Object.entries(allowed).map(([q, arr]) => [q, arr.map(normalize)])\n);\nfunction getLabel(el) {\n  const lab = el.closest('label');\n  return lab ? normalize(lab.textContent) : '';\n}\n\n// ————————————————\n// 5) Parcours des groupes de radios et clic\n// ————————————————\nconst radios = [...document.querySelectorAll('input[type=\"radio\"]')];\nconst groups = radios.reduce((acc, r) => {\n  (acc[r.name] = acc[r.name] || []).push(r);\n  return acc;\n}, {});\nfor (const group of Object.values(groups)) {\n  const visible = group.filter(r => r.offsetParent !== null);\n  if (!visible.length) continue;\n  const container = visible[0].closest('[data-groupname]');\n  const qNum = container?.querySelector('.itemnr')?.textContent\n    ? parseInt(container.querySelector('.itemnr').textContent.trim(), 10)\n    : null;\n  let candidates = visible;\n  if (qNum && allowedNorm[qNum]) {\n    const filtered = visible.filter(r => allowedNorm[qNum].includes(getLabel(r)));\n    if (filtered.length) candidates = filtered;\n  }\n  candidates[Math.floor(Math.random() * candidates.length)].click();\n}\n","preloadScripts":[],"everyNewTab":false,"runBeforeLoad":false},"label":"javascript-code"},{"id":"eaqu5nf","type":"BlockBasic","initialized":false,"position":{"x":459.75535722944704,"y":335.11740335720737},"data":{"disableBlock":false},"label":"active-tab"}],"edges":[{"id":"vueflow__edge-qBt3gCoPSUlBo6LIUNqaHqBt3gCoPSUlBo6LIUNqaH-output-1-eaqu5nfeaqu5nf-input-1","type":"custom","source":"qBt3gCoPSUlBo6LIUNqaH","target":"eaqu5nf","sourceHandle":"qBt3gCoPSUlBo6LIUNqaH-output-1","targetHandle":"eaqu5nf-input-1","updatable":true,"selectable":true,"data":{},"label":"","markerEnd":"arrowclosed","class":"source-qBt3gCoPSUlBo6LIUNqaH-output-1 target-eaqu5nf-input-1","sourceX":315.99992722391863,"sourceY":432.9999805601518,"targetX":435.75543997215107,"targetY":371.1173839173592},{"id":"vueflow__edge-eaqu5nfeaqu5nf-output-1-i5h1l46i5h1l46-input-1","type":"custom","source":"eaqu5nf","target":"i5h1l46","sourceHandle":"eaqu5nf-output-1","targetHandle":"i5h1l46-input-1","updatable":true,"selectable":true,"data":{},"label":"","markerEnd":"arrowclosed","class":"source-eaqu5nf-output-1 target-i5h1l46-input-1","sourceX":675.7553615466722,"sourceY":371.1173839173592,"targetX":655.5342650228523,"targetY":475.9545235276348}],"position":[22.00950146931575,28.685961139496214],"zoom":0.7917047464637371,"viewport":{"x":22.00950146931575,"y":28.685961139496214,"zoom":0.7917047464637371}},"settings":{"publicId":"","blockDelay":0,"saveLog":true,"debugMode":false,"restartTimes":3,"notification":true,"execContext":"popup","reuseLastState":false,"inputAutocomplete":true,"onError":"stop-workflow","executedBlockOnWeb":false,"insertDefaultColumn":false,"defaultColumnName":"column"},"globalData":"{\n\t\"key\": \"value\"\n}","description":"","includedWorkflows":{}}